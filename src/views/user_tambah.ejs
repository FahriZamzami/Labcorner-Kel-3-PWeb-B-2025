<body class="bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 min-h-screen text-gray-800 font-[Inter]">
  <div class="max-w-6xl mx-auto px-8 py-12 fade-in">
    <h2 class="text-5xl font-extrabold text-white drop-shadow mb-12">👤 Tambah User Baru</h2>

    <div class="grid grid-cols-1 xl:grid-cols-2 gap-10 items-start">
      <!-- FORM -->
      <form id="formUser" action="/user/tambah" method="POST" class="bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl p-10 space-y-8 border border-white/20 transition-all duration-300 hover:shadow-3xl">
        <div>
          <label for="nama" class="block text-xl font-semibold text-gray-700 mb-1">🧑 Nama Lengkap</label>
          <input type="text" name="nama" id="nama" class="form-input text-lg transition-all duration-300" placeholder="Masukkan nama lengkap" required />
        </div>

        <div>
          <label for="username" class="block text-xl font-semibold text-gray-700 mb-1">🆔 Username</label>
          <input type="text" name="username" id="username" class="form-input text-lg transition-all duration-300" placeholder="username123" required />
        </div>

        <div>
          <label for="password" class="block text-xl font-semibold text-gray-700 mb-1">🔒 Password</label>
          <input type="password" name="password" id="password" class="form-input text-lg transition-all duration-300" placeholder="••••••••" required />
        </div>

        <div>
          <label for="peran" class="block text-xl font-semibold text-gray-700 mb-1">👥 Peran</label>
          <select name="peran" id="peran" class="form-input text-lg transition-all duration-300" required>
            <option value="">-- Pilih Peran --</option>
            <option value="mahasiswa">Mahasiswa</option>
            <option value="asisten">Asisten</option>
          </select>
        </div>

        <div class="flex justify-between items-center pt-4">
          <button type="submit" id="submitBtn" class="bg-indigo-600 hover:bg-indigo-700 active:scale-95 text-white text-lg font-semibold px-6 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
            ➕ Tambah User
          </button>
          <span id="loader" class="hidden animate-spin border-4 border-indigo-300 border-t-white rounded-full w-8 h-8"></span>
        </div>
      </form>

      <!-- PREVIEW -->
      <div class="bg-white/80 backdrop-blur-xl p-8 rounded-3xl shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-300">
        <h3 class="text-2xl font-bold text-indigo-700 mb-6">🔍 Preview Data User</h3>
        <div class="space-y-4 text-lg">
          <p><strong>🧑 Nama:</strong> <span id="previewNama" class="text-gray-700">-</span></p>
          <p><strong>🆔 Username:</strong> <span id="previewUsername" class="text-gray-700">-</span></p>
          <p><strong>👥 Peran:</strong> <span id="previewPeran" class="text-gray-700">-</span></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-6 right-6 bg-green-600 text-white px-6 py-3 rounded-xl shadow-lg hidden opacity-0 transition-all duration-500 z-50 text-lg">
    ✅ User berhasil ditambahkan!
  </div>

  <!-- Tailwind Input Custom -->
  <style>
    .form-input {
      @apply w-full px-5 py-3 border border-gray-300 rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-400;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }
  </style>

  <!-- Script -->
  <script>
    const form = document.getElementById('formUser');
    const submitBtn = document.getElementById('submitBtn');
    const loader = document.getElementById('loader');

    const inputs = {
      nama: document.getElementById('nama'),
      username: document.getElementById('username'),
      password: document.getElementById('password'),
      peran: document.getElementById('peran')
    };

    const previews = {
      nama: document.getElementById('previewNama'),
      username: document.getElementById('previewUsername'),
      peran: document.getElementById('previewPeran')
    };

    Object.values(inputs).forEach(input => {
      input.addEventListener('input', updatePreviewAndValidation);
    });

    function updatePreviewAndValidation() {
      previews.nama.textContent = inputs.nama.value || "-";
      previews.username.textContent = inputs.username.value || "-";
      previews.peran.textContent = inputs.peran.options[inputs.peran.selectedIndex]?.text || "-";

      const isValid = inputs.nama.value && inputs.username.value && inputs.password.value && inputs.peran.value;
      submitBtn.disabled = !isValid;
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      loader.classList.remove('hidden');
      submitBtn.disabled = true;

      setTimeout(() => {
        loader.classList.add('hidden');
        showToast("✅ User berhasil ditambahkan!");
        form.reset();
        updatePreviewAndValidation();
      }, 1200);
    });

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.classList.remove('hidden', 'opacity-0');
      toast.classList.add('opacity-100');

      setTimeout(() => {
        toast.classList.remove('opacity-100');
        toast.classList.add('opacity-0');
        setTimeout(() => toast.classList.add('hidden'), 300);
      }, 2500);
    }

    // Trigger initial validation
    updatePreviewAndValidation();
  </script>
</body>
